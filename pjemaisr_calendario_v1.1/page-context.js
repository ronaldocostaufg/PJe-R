(()=>{var Te=Object.defineProperty;var _e=(o,t,e)=>t in o?Te(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var c=(o,t,e)=>_e(o,typeof t!="symbol"?t+"":t,e);const we=o=>{const t=[];for(const e of o)Array.isArray(e)?t.push(...e):t.push(e);return t};function Se(o){if(o.__esModule)return o;var t=o.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(o).forEach(function(r){var s=Object.getOwnPropertyDescriptor(o,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return o[r]}})}),e}var _={};const Re={},Me=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"})),De=Se(Me);Object.defineProperty(_,"__esModule",{value:!0});_.obterBranchAtual=ce;_.detectarGitTag=z;_.obterVersao=ue;_.obterVersaoENomeExibicao=$e;var je=_.obterNomeExibicao=le;_.validarAmbiente=Le;const ae=De;function ce(){try{return(0,ae.execSync)("git branch --show-current",{encoding:"utf-8",stdio:["pipe","pipe","ignore"]}).trim()}catch{return console.log("\u26a0\ufe0f N\u00e3o foi poss\u00edvel obter a branch atual, usando fallback"),"unknown-branch"}}function z(){try{let o;try{o=(0,ae.execSync)("git describe --exact-match --tags HEAD",{encoding:"utf-8",stdio:["pipe","pipe","ignore"]}).trim()}catch{return{isTag:!1}}if(!o)return{isTag:!1};console.log(`\ud83c\udff7\ufe0f Tag detectada: ${o}`);const t=o.match(/^v(\d+\.\d+\.\d+)(-tester)?$/);if(!t)return console.log(`\u26a0\ufe0f Tag n\u00e3o segue o padr\u00e3o esperado (vx.x.x ou vx.x.x-tester): ${o}`),{isTag:!1};const e=t[1],r=!!t[2];return{isTag:!0,version:e,isTester:r}}catch{return console.log("\ud83d\udcdd N\u00e3o estamos numa tag git, usando configura\u00e7\u00f5es de desenvolvimento"),{isTag:!1}}}function ue(o="77.777.7777"){try{const t=z();return t.isTag?t.version:"999.999.999"}catch(t){return console.error("\u274c Erro ao obter vers\u00e3o:",t),o}}function $e(o="77.777.7777",t="PJe+R"){try{const e=z();console.log("\ud83d\udce6 Determinando vers\u00e3o e nome para o manifest...");const r=ue(o);let s;try{s=le()}catch{s=t}const n={version:r,displayName:s};return e.isTag?e.isTester?console.log("\ud83e\uddea Configura\u00e7\u00e3o de tester aplicada"):console.log("\ud83d\ude80 Configura\u00e7\u00e3o de produ\u00e7\u00e3o aplicada"):console.log("\ud83d\udd27 Configura\u00e7\u00e3o de desenvolvimento aplicada"),console.log(`   \ud83d\udcca Vers\u00e3o: ${n.version}`),console.log(`   \ud83c\udff7\ufe0f Nome: ${n.displayName}`),n}catch(e){return console.error("\u274c Erro ao determinar vers\u00e3o e nome:",e),{version:o,displayName:t}}}function le(){try{const o=z();return o.isTag?o.isTester?"PJe+R Tester":"PJe+R":"PJe+R (Developer)"}catch(o){return console.error("\u274c Erro ao obter nome de exibi\u00e7\u00e3o:",o),"PJe+R (Developer)"}}function Le(o){var t;const e=(t="production")===null||t===void 0?void 0:t.toLowerCase(),r=z(),s=o||{message:console.log,info:console.log,success:console.log,step:console.log,warn:console.warn,warning:console.warn,error:console.error};s.step("\ud83d\udd0d Validando ambiente de deploy"),s.info(`   \ud83c\udf0d NODE_ENV: ${e}`),s.info(`   \ud83c\udff7\ufe0f \u00c9 tag Git: ${r.isTag}`),s.info(`   \ud83d\udccb Vers\u00e3o: ${r.version||"N/A"}`),r.isTag&&s.info(`   \ud83e\uddea \u00c9 tester: ${r.isTester}`);let n=!1,i="";switch(e){case"development":r.isTag&&r.isTester?n=!0:i="\u274c NODE_ENV=development requer estar numa tag tester (vx.x.x-tester)";break;case"production":r.isTag&&!r.isTester?n=!0:i="\u274c NODE_ENV=production requer estar numa tag de produ\u00e7\u00e3o (vx.x.x)";break;case"local":r.isTag?i="\u274c NODE_ENV=local requer estar numa branch (n\u00e3o numa tag)":n=!0;break;default:i=`\u274c NODE_ENV inv\u00e1lido: ${e}. Valores aceitos: development, production, local`;break}if(!n){s.error("\ud83d\udea8 ERRO DE VALIDA\u00c7\u00c3O DE AMBIENTE"),s.error(i),s.warn("\ud83d\udccb CONDI\u00c7\u00d5ES PARA EXECU\u00c7\u00c3O:"),s.info("   \u2022 NODE_ENV=development \u2192 Deve estar numa tag tester (vx.x.x-tester)"),s.info("   \u2022 NODE_ENV=production  \u2192 Deve estar numa tag de produ\u00e7\u00e3o (vx.x.x)"),s.info("   \u2022 NODE_ENV=local       \u2192 Deve estar numa branch qualquer (n\u00e3o numa tag)"),s.warn("\ud83d\udca1 SITUA\u00c7\u00c3O ATUAL:"),s.info(`   \u2022 NODE_ENV: ${e}`),s.info(`   \u2022 Estado Git: ${r.isTag?`Tag: ${r.version}`:`Branch: ${ce()}`}`),s.error("\u26d4 Execu\u00e7\u00e3o interrompida por incompatibilidade de ambiente");const a=["\ud83d\udea8 ERRO DE VALIDA\u00c7\u00c3O DE AMBIENTE",i,"CONDI\u00c7\u00d5ES: development=tag-tester, production=tag-release, local=branch"].join(" | ");throw new Error(a)}s.success("\u2705 Valida\u00e7\u00e3o de ambiente aprovada!")}function de(o){return{}.toString.call(o).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function Ne(o){return de(o)==="string"}function pe(o){const t=de(o);return t.startsWith("html")&&t.endsWith("element")}function Ce(o){return Array.isArray(o)&&o.every(t=>pe(t))}var f;let L=(f=class{static info(t){f.log(t,f.estilos.azul)}static erro(t){t instanceof Error?(f.log(t.message,f.estilos.vermelho),console.log(t)):f.log(t,f.estilos.vermelho)}static aviso(t){f.log(t,f.estilos.laranja)}static sucesso(t){f.log(t,f.estilos.verde)}static detalhes(t){f.log(t,f.estilos.cinza)}static inspecionar(t,e){this.autorizarEmProducao&&(f.detalhes(t),console.log(e))}static log(t,e=""){this.autorizarEmProducao&&console.log(`%c${t}`,e)}},c(f,"estilos",{azul:"background-color: #2979FF; color: #ffffff; font-weight: bold; padding: 2px 6px;",vermelho:"background-color: #F44336; color: #ffffff; font-weight: bold; padding: 2px 6px;",laranja:"background-color: #F57F17; color: #ffffff; font-weight: bold; padding: 2px 6px;",verde:"background-color: #2E7D32; color: #ffffff; font-weight: bold; padding: 2px 6px;",cinza:"background-color: #757575; color: #ffffff; font-weight: bold; padding: 2px 6px;"}),c(f,"console",{assert:(...t)=>{},count:(...t)=>{},debug:(...t)=>{},dir:(...t)=>{},error:(...t)=>{},group:(...t)=>{},groupCollapsed:(...t)=>{},groupEnd:(...t)=>{},info:(...t)=>{},log:(...t)=>{},profile:(...t)=>{},table:(...t)=>{},time:(...t)=>{},timeEnd:(...t)=>{},trace:(...t)=>{},warn:(...t)=>{}}),c(f,"autorizarEmProducao",!1),f);const x=class x{constructor({recurso:t,contexto:e,adicional:r}){c(this,"recurso");c(this,"contexto_");c(this,"adicional");this.recurso=t.replace(/^_/,""),this.contexto_=e||"page-context",this.adicional=r}get contexto(){return Ne(this.contexto_)?this.contexto_:this.contexto_()}get console(){return x._depurador=this,x._console}info(t){this.log(t,L.estilos.azul)}erro(t,e){const r=t instanceof Error?t.message:t;this.log(r,L.estilos.vermelho,e),t instanceof Error&&console.log(t,e)}aviso(t){this.log(t,L.estilos.laranja)}sucesso(t,e){this.log(t,L.estilos.verde,e)}detalhes(t){this.log(t,L.estilos.cinza)}inspecionar(t,e){this.detalhes(t),this.console.log(e)}log(t,e="",r){this.console.log(`%c${t}`,e,r)}};c(x,"_depurador"),c(x,"_baseConsoleFunc",(t,...e)=>{const r=`[${je()}][${x._depurador.recurso}][${x._depurador.contexto}]${x._depurador.adicional?`[${x._depurador.adicional}]`:""}: `;typeof e[0]=="string"?e[0]=e[0].startsWith("%c")?`%c${r}${e[0].slice(2)}`:`${r}${e[0]}`:e=[r].concat(e),t(...e)}),c(x,"_console",{assert:(...t)=>(...e)=>{},count:(...t)=>(...e)=>{},debug:(...t)=>(...e)=>{},dir:(...t)=>(...e)=>{},error:(...t)=>(...e)=>{},group:(...t)=>(...e)=>{},groupCollapsed:(...t)=>(...e)=>{},groupEnd:(...t)=>(...e)=>{},info:(...t)=>(...e)=>{},log:(...t)=>(...e)=>{},profile:(...t)=>(...e)=>{},table:(...t)=>(...e)=>{},time:(...t)=>(...e)=>{},timeEnd:(...t)=>(...e)=>{},trace:(...t)=>(...e)=>{},warn:(...t)=>(...e)=>{}});let A=x;var fe={exports:{}};const Ue=o=>typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?()=>{const t=crypto.getRandomValues(new Uint8Array(1))[0];return(t>=o?t%o:t).toString(o)}:()=>Math.floor(Math.random()*o).toString(o),he=(o=7,t=!1)=>Array.from({length:o},Ue(t?16:36)).join("");fe.exports=he;fe.exports.default=he;var ve=(o=>(o[o.QUANTIDADE_TOTAL_TAREFA=1]="QUANTIDADE_TOTAL_TAREFA",o[o.PARALIZADOS_ENTRADA_TAREFA=2]="PARALIZADOS_ENTRADA_TAREFA",o[o.PARALIZADOS_ULTIMO_MOVIMENTO=3]="PARALIZADOS_ULTIMO_MOVIMENTO",o))(ve||{}),me=(o=>(o.PADRAO="mc_formato_padrao",o.MINIMO="mc_formato_minimo",o))(me||{}),ge=(o=>(o[o.NAO_ATIVADO=0]="NAO_ATIVADO",o[o.DESMONTADO=1]="DESMONTADO",o[o.COMPLETAMENTE_MONTADO=2]="COMPLETAMENTE_MONTADO",o[o.REQUISITANDO_E_PROCESSANDO_DADOS=3]="REQUISITANDO_E_PROCESSANDO_DADOS",o))(ge||{});ve.PARALIZADOS_ENTRADA_TAREFA,me.PADRAO,ge.NAO_ATIVADO;const Fe=200,ee={PAINEL_USUARIO:/http:\/\/localhost:(\d+)\/pje\/(?:.+\/)?painel-usuario(-\w+)*(\w*\d+G)?\.html/,PAINEL_USUARIO_LISTA_TAREFA_FILTRO:"http://localhost:4000/pje/lista-tarefa-filtro.html"},qe={PAINEL_USUARIO:/.*front.[\w.-]+\.(jus\.br|cnj\.cloud).*painel-usuario-interno(?!\/etiquetas)/},$={HREFS:{PAINEL_USUARIO:[qe.PAINEL_USUARIO,ee.PAINEL_USUARIO,ee.PAINEL_USUARIO_LISTA_TAREFA_FILTRO]}};class X{constructor({ouvirMensageria:t,prioridade:e,usarMensageria:r}){c(this,"ouvirMensageria");c(this,"mensageria",null);c(this,"prioridadeMensageria",100);c(this,"mensagem");this.ouvirMensageria=t||!1,this.ouvirMensageria&&(this.mensageria=D.getInstance(),this.prioridadeMensageria=e||this.prioridadeMensageria),r&&!this.mensageria&&(this.mensageria=D.getInstance())}ouvirMensagem(t){throw new Error("Method not implemented.")}deveOuvirMensageria(){return!!this.ouvirMensageria}static ordenarTransmissaoOuvidoresMensageria(t){t.sort((e,r)=>e.prioridadeMensageria-r.prioridadeMensageria)}emitirMensagemInterna(t){window.postMessage(t,window.location.origin),O.aviso("emitindo mensagem interna"),O.console.info(t)}}const T=class T{constructor(){c(this,"ouvidorDeTransimissao",null);c(this,"gerenciadorOuvintes");window.addEventListener("message",t=>this.ouvinteGeral(t),{capture:!0}),this.gerenciadorOuvintes=new ze}ouvinteGeral(t){const e=t.data;if(!(!e||!e.origem||!e.tipo||!e.mensagem||e.origem!=="PJEMaisR"))if(this.ouvidorDeTransimissao){const r={tipo:e.tipo,acao:e.mensagem.acao,conteudo:e.mensagem.conteudo,id:e.mensagem.id};e.mensagem.respostaParaAuxiliador?(r.resposta=!0,this.gerenciadorOuvintes.resolverOuvinte(r),this.responderMensagem(r,!0)):this.ouvidorDeTransimissao.callback(r),t.stopPropagation()}else O.erro("Ouvidor de transmiss\u00e3o n\u00e3o definidos")}definirOuvinteDeTransmissaoUmaVez(t){this.ouvidorDeTransimissao||(this.ouvidorDeTransimissao=t)}static getInstance(){return T.instance||(T.instance=new T),T.instance}enviarMensagemExtensao(t){window.dispatchEvent(new CustomEvent("pmr-message",{detail:{tipo:t.tipo,mensagem:{acao:t.acao,conteudo:t.conteudo,id:t.id,resposta:t.resposta}}})),O.aviso("Mensageria contexo de p\u00e1gina: enviado mensagem"),O.console.info(t)}responderMensagem(t,e){const r={...t};r.resposta=!0,r.conteudo=e,this.enviarMensagemExtensao(r)}async enviarMensagemExtensaoEAguardarResposta(t,e=200){return new Promise((r,s)=>{this.gerenciadorOuvintes.novoOuvinte(e,t).then(n=>r(n)).catch(n=>s(n)),window.dispatchEvent(new CustomEvent("pmr-message",{detail:{tipo:t.tipo,mensagem:{acao:t.acao,conteudo:t.conteudo,id:t.id}}})),O.aviso("Mensageria contexo de p\u00e1gina: enviado mensagem"),O.console.info(t)})}};c(T,"instance");let D=T;class ze{constructor(){c(this,"listenersEspecificosMap",new Map)}async novoOuvinte(t=Fe,e){const r=`id_${Math.random()*1e7}_${Date.now()}`;return e.id=r,new Promise((s,n)=>{let i=!1;this.adicionar(r,a=>{this.remover(r),s(a),i=!0}),setTimeout(()=>{i||(this.remover(r),n({erro:"timeout"}))},t)})}resolverOuvinte(t){if(!t.id)throw new Error("Obrigat\u00f3ria a defin\u00e7\u00e3o do Id da Mensagem para executar ouvinte");const e=this.listenersEspecificosMap.get(t.id);if(!e){O.erro(`Listener n\u00e3o definido para o id ${t.id}`);return}e(t.conteudo)}adicionar(t,e){if(this.listenersEspecificosMap.has(t)){O.console.warn(`O listener ${t} j\u00e1 existe!`);return}this.listenersEspecificosMap.set(t,e)}remover(t){if(!this.listenersEspecificosMap.has(t)){O.console.warn(`O listener ${t} n\u00e3o existe!`);return}this.listenersEspecificosMap.delete(t)}}const O=new A({recurso:D.name,contexto:"contexto de p\u00e1gina"});class w extends X{constructor(e,{alvo:r,checarHref:s,esperar:n,obterAssincromamente:i,ouvirMensageria:a,prioridade:u,usarMensageria:l}){super({ouvirMensageria:a,prioridade:u,usarMensageria:l});c(this,"nome","Auxiliador Contexto P\u00e1gina [PAI]");c(this,"esperar");c(this,"esperarPor");c(this,"checarHref");c(this,"tipoEspera");c(this,"obterAssincromamente");c(this,"alvosEncontrados",[]);c(this,"setAlvoPersistido",new WeakSet);c(this,"_isAtiva",!1);this.obterAssincromamente=i||!1,this.nome=e,this.esperar=n===!0||typeof n=="string",this.esperarPor=r,this.checarHref=s,typeof n=="string"&&(this.tipoEspera=n),this.esperar=r?Array.from(document.querySelectorAll(r||"")).length==0:this.esperar}get isAtiva(){return this._isAtiva}set isAtiva(e){this._isAtiva=e}podeInjetar(){throw new Error("Method not implemented.")}obterNome(){return this.nome}deveAguardarMudancas(){return!!this.esperar}selecionar(e,r){if(!e)return[document.body];if(pe(e)||Ce(e))return Array.isArray(e)?e:[e];const s=r??Array.from(document.querySelectorAll("*")),n=s.length,i=[],a=Array.isArray(e)?e:[e];for(let u=0;u<a.length;u++)for(let l=0;l<n;l++)s[l].matches(a[u])&&i.push(s[l]);return i}verificarMudancas(e){!this.esperar||!this.esperarPor||(this.alvosEncontrados=this.selecionar(this.esperarPor,e),this.alvosEncontrados.length&&this.injetar())}encontrarAncora(){return this.alvosEncontrados=this.selecionar(this.esperarPor),this.alvosEncontrados.length?(b.inspecionar(`${this.nome} -> alvos localizados: `,this.alvosEncontrados),!0):!1}protocoloInjetar(){try{if(!this.precisaReinjetar())return;this.obterAssincromamente?(b.aviso(`Auxiliador "${this.nome}" ser\u00e1 ser\u00e1 injetada assincromamente e ativada no contexto de p\u00e1gina`),this._asyncGetter(this.obtentorAssincromo).then(e=>{if(!e){b.aviso(`Auxiliador "${this.nome}": obtentor assincromo falhou.`);return}this.executar(),this.isAtiva=!0,b.aviso(`Auxiliador "${this.nome}" injetado assincromamente e ativada no contexto de p\u00e1gina`)})):(this.executar(),this.isAtiva=!0,b.aviso(`Auxiliador "${this.nome}" ser\u00e1 ser\u00e1 injetado e ativada no contexto de p\u00e1gina`))}catch(e){b.erro(`Erro ao injetar e ativar Auxiliador: "${this.nome}"`),b.console.warn("Erro: ",e)}}injetar(){this.encontrarAncora()&&(this.esperar=!1,this.protocoloInjetar(),this.tipoEspera==="reativar"&&(this.esperar=!0))}obtentorAssincromo(){if(this.obterAssincromamente)throw new Error(`Auxiliadores que possuem obtentores ass\u00edncromos precisam sobrepor
        a fun\u00e7\u00e3o "obtentorAssincromo"`);return!1}precisaReinjetar(){if(!this.verificaPersistencia()&&this.tipoEspera==="reativar")this.registrarInjecao();else if(this.verificaPersistencia()&&this.tipoEspera==="reativar")return!1;return!0}verificaPersistencia(){return this.alvosEncontrados.every(r=>!!r&&this.setAlvoPersistido.has(r))}registrarInjecao(){this.alvosEncontrados.forEach(r=>{r&&this.setAlvoPersistido.add(r)})}async _asyncGetter(e,r=1e4){return new Promise(s=>{if(typeof e!="function"){s(null);return}try{const i=e();if(i){s(i);return}}catch(i){b.console.error(i)}const n=setInterval(()=>{try{const i=typeof e=="function"?e():null;i&&(clearInterval(n),s(i))}catch(i){b.console.error(i)}},100);setTimeout(()=>{try{clearInterval(n),s(null)}catch(i){s(null),b.console.error(i)}},r)})}}const b=new A({recurso:X.name,contexto:"contexto de p\u00e1gina"});function Ve(){try{return window.self!==window.top}catch{return!0}}class S{constructor(t,e,r){c(this,"nome","Auxiliador Contexto de P\u00e1gina [PAI]");c(this,"opcoesInjecao");c(this,"_dependencias");this.nome=t,this.opcoesInjecao=e,this._dependencias=r}podeInjetar(){const{checarHref:t,emIframe:e}=this.opcoesInjecao;return!(!this.verificaPresenteFrame(e)||!this.verificaPresenteHref(t))}verificaPresenteFrame(t){const e=Ve();if(t==="todos"||t===void 0&&!e)return!0;const r=t===e;return r||N.log(`Auxiliador "${this.nome}" n\u00e3o deve ser instalada neste iframe`),r}verificaPresenteHref(t){const e=window.location.href;if(t===void 0)return!0;if(t===null)return N.log(`Auxiliador "${this.nome}" n\u00e3o ser\u00e1 instalada pois checarHref === null`),!1;let r;Array.isArray(t)?r=we(t):r=[t];let s=!1;return r.some(n=>{n instanceof RegExp?n.test(e)&&(s=!0):typeof n=="string"&&e.includes(n)&&(s=!0)}),s}verificaPresenteElemento(t){if(!t)return!0;const e=Array.from(document.querySelectorAll(t)).length!==0;return e||N.log(`Auxiliador "${this.nome}" n\u00e3o deve ser injetado neste iframe`),e}injetar(){if(!this.podeInjetar())return N.info(`Auxiliador "${this.nome}" n\u00e3o ser\u00e1 injetado`),null;N.info(`Auxiliador "${this.nome}" ser\u00e1 injetado`);const e=this.opcoesInjecao.auxiliador||w,r=new e(this.nome,this.opcoesInjecao);return r.injetar(),r}dependencias(){return this._dependencias}}const N=new A({recurso:S.name,contexto:"contexto de p\u00e1gina"});class Ee{constructor(t){c(this,"injetores",[]);c(this,"auxiliadores",[]);c(this,"observador");c(this,"OPCOES_OBSERVADOR",{childList:!0,subtree:!0,attributes:!1,characterData:!1});c(this,"mensageria");this.injetores=t,this.mensageria=D.getInstance()}iniciar(){let t=[];const e=s=>s.every(n=>this.auxiliadores.some(i=>i instanceof n));this.injetores.forEach(s=>{const n=s.dependencias();if(n)if(e(n)){const i=s.injetar();i!==null&&this.auxiliadores.push(i)}else t.push(s);else{const i=s.injetar();i!==null&&this.auxiliadores.push(i)}});let r;do{r=!1;const s=[];t.forEach(n=>{const i=n.dependencias();if(i&&e(i)){P.console.warn("Injetando com dependencias: ",n,i);const a=n.injetar();a!==null&&this.auxiliadores.push(a),r=!0}else s.push(n)}),t=s}while(r&&t.length>0);t.length>0&&P.console.warn("Alguns instaladores t\u00eam depend\u00eancias n\u00e3o satisfeitas:",t),this.auxiliadores.length&&(this.observador=this.ouvirMudancas()||void 0,this.ouvirMensageria(),P.inspecionar("Observador: ",this.observador))}ouvirMensageria(){const t=[];this.auxiliadores.forEach(r=>{r.deveOuvirMensageria()&&t.push(r)});const e=r=>{t.forEach(s=>{s.isAtiva&&s.ouvirMensagem(r)})};this.mensageria.definirOuvinteDeTransmissaoUmaVez({callback:e,origem:this}),X.ordenarTransmissaoOuvidoresMensageria(t)}ouvirMudancas(){const t=[],e=[],r=[];this.auxiliadores.forEach(d=>{d.deveAguardarMudancas()&&t.push(d),d.aoAlterarDOM&&r.push(d)});const s=t.map(d=>d.obterNome()),n=d=>{r.forEach(h=>{h.isAtiva&&h.aoAlterarDOM&&h.aoAlterarDOM(d)})};P.info(`MutationObserver ser\u00e1 iniciado a pedido de ${s.join(",")}`);let i=0;const a=[];let u=null;const l=()=>{const d=[],h=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT);for(;h.nextNode();)d.push(h.currentNode);if(!t.length&&r.length){n(a),P.console.warn("Nenhum subscritor ativo. MutationObserver mantido apenas para os subscritores ouvindo altera\u00e7\u00f5es no DOM: ",r);return}P.console.info("MutationObserver reportando: ",a),P.log(`Ao iniciar, ${t.length} subscritores ativos`);for(let v=0;v<t.length;v++)t[v].verificarMudancas(d),t[v].deveAguardarMudancas()||(e.push(t[v]),t.splice(v,1));P.log(`Ao finalizar, ${t.length} subscritores ativos: ${t.map(v=>v.obterNome())}`);for(let v=0;v<e.length;v++)e[v].deveAguardarMudancas()&&(t.push(e[v]),e.splice(v,1));n(a),!t.length&&!r.length&&g.disconnect()},p=d=>{a.concat(d);for(let h=0;h<d.length;h++)i+=d[h].addedNodes.length;i>20?(u&&clearTimeout(u),l(),a.splice(0,-1),i=0):(u&&clearTimeout(u),u=setTimeout(()=>{l(),a.splice(0,-1),i=0},500))},g=new MutationObserver(d=>{p(d)});return g.observe(document.body,this.OPCOES_OBSERVADOR),this.observador=g,g}}const P=new A({recurso:Ee.name,contexto:"contexto de p\u00e1gina"});var m=(o=>(o.ETIQUETA="etiqueta",o.TAREFA="tarefa",o.PROCESSO="processo",o.NOTIFICACAO="notificacao",o.INFO_GERAL="infoGeral",o.LISTA_TAREFA_FILTROS="eTipoMensagem.LISTA_TAREFA_FILTROS",o))(m||{});const I=class I extends w{constructor(e,r){super(e,r);c(this,"refArray",[]);c(this,"servicos",{});c(this,"componentes",{});I.modulosRaizesProvidos.refArray=this.refArray,I.modulosRaizesProvidos.servicos=this.servicos,I.modulosRaizesProvidos.componentes=this.componentes}static obterServicos(){return I.modulosRaizesProvidos.servicos}static obterRefArray(){return I.modulosRaizesProvidos.refArray}static obterComponentes(){return I.modulosRaizesProvidos.servicos}exporPublicamente(){}executar(){window.__pmr_run_once__||(Object.defineProperty(window,"__pmr_run_once__",{value:Symbol("pmrOnce"),writable:!1,enumerable:!1}),this.extractor(this.refArray),this.organizarRefs(this.refArray),setInterval(()=>{this.organizarRefs(this.refArray)},1e3),this.exporPublicamente())}organizarRefs(e){var r;Object.values(e).forEach(s=>{this.getObjects(s)}),(r=e==null?void 0:e.providers)==null||r.forEach(s=>{this.getObjects(s)})}getObjects(e){var r;(r=e==null?void 0:e.obj)!=null&&r.component&&Object.keys(e.obj.component).forEach(s=>{const n=s.toLocaleLowerCase();n.includes("service")?this.servicos[s]=e.obj.component[s]:n.includes("component")&&(this.componentes[s]=e.obj.component[s],this.refArray[s]=e.obj.component[s])})}extractor(e){const r=this;e=e||{},e.providers=e.providers||[];const s=Function.prototype.apply.bind(Function.prototype.bind);Object.defineProperty(Function.prototype,"bind",{value:function(a,...u){const l=[a,...u],p=s(this,l);return!a||a.__proto__.constructor.name==="u"||(a.__capt__||!e.includes(a)&&e.push(a),p.boundObject=a),p}}),Object.freeze(Function.prototype.bind),V.inspecionar(`"${r.nome}": override bind`,s);const n=Object.assign;Object.assign=function(a,...u){const l=[a,...u];return a&&Object.keys(a).join(", ").toLocaleLowerCase().includes("component")&&!a.__capt__&&!e.includes(a)&&e.push(a),u.forEach(p=>{p&&Object.keys(p).join(", ").toLocaleLowerCase().includes("component")&&!p.__capt__&&!e.includes(p)&&e.push(p)}),n.apply(this,l)},Object.freeze(Object.assign),V.inspecionar(`"${r.nome}": override assign`,n);const i=Function.prototype.apply.bind(Array.prototype.push);Object.defineProperty(Array.prototype,"push",{value:function(a){const u=[...arguments];if(a&&a.component){const l=a.component;e[l.constructor.name]=e[l.constructor.name]||{const:l.constructor,obj:a},r.__getProviders(a),Object.values(a)&&Object.values(a).forEach(p=>{if(p&&p.component){const g=p.component;e[g.constructor.name]=e[g.constructor.name]||{const:g.constructor,obj:p},r.__getProviders(p)}})}return i(this,u)}}),Object.freeze(Array.prototype.push),V.inspecionar(`"${this.nome}": override assign`,i),this.__getProviders(e)}__getProviders(e){var i;const r=this.refArray,s=(i=e.root)==null?void 0:i.ngModule,n=s==null?void 0:s._providers;n&&Array.isArray(n)&&n.forEach(a=>{a&&!r.providers.includes(a)&&r.providers.push(a)}),r.providers.forEach(a=>{a.tick&&(r.applicationRef=a),r.applicationRef&&(r.zone=r.applicationRef._zone)}),Object.values(e).forEach(a=>{var u,l;a&&((u=a.component)==null?void 0:u.cssClass)=="selecionar-etiquetas"&&(r.etiquetasComponent=a.component,r.listaEtiquetas=a.component.listaEtiquetas.etiquetas),a&&((l=a.component)!=null&&l.tarefaSelecionada)&&(r._tarefasComponent=a.component,r.processosTarefa=a.component.processosTarefa,r.processosMarcados=a.component.processosMarcados)})}ouvirMensagem(e){switch(e.tipo){case m.ETIQUETA:case m.TAREFA:case m.NOTIFICACAO:case m.PROCESSO:this.organizarRefs(this.refArray),V.info("mensagem ouvida");break}}};c(I,"modulosRaizesProvidos",{refArray:[],servicos:{},componentes:{}});let E=I;const V=new A({recurso:E.name,contexto:"contexto de p\u00e1gina"});class J{constructor(t,e){c(this,"_urlPattern");c(this,"subscritor");c(this,"cache");this._urlPattern=t,this.subscritor=e,this.cache=new Ae}get urlPattern(){return this._urlPattern}}const F=class F extends w{constructor(e,r){super(e,r);c(this,"cache");c(this,"mapAPI",["cargos","orgaosJulgadores","orgaosJulgadoresColegiado","aplicacaoSistema","tiposAudiencia","especialidades","tiposProcessoDocumento","pje:title:icone:liminar","pje:label:filtro:liminar"]);this.cache=new Ae,F.selfInstance=this}executar(){C.aviso(`"${this.nome}" injetado!!!`),window.XMLHttpRequest.prototype.send=new Proxy(window.XMLHttpRequest.prototype.send,{apply:async(e,r,s)=>{const n=r.__zone_symbol__xhrURL??"",i=this.mapAPI.find(a=>a instanceof J?a.urlPattern instanceof RegExp?!!a.urlPattern.exec(n):n.endsWith(a.urlPattern):n.endsWith(a));if(!i)return Reflect.apply(e,r,s);if(typeof i=="string"){const a=this.cache.get(n);if(!this.cache.has(n))r.onreadystatechange=()=>{r.readyState===4&&r.status===200&&typeof i=="string"&&this.cache.set(n,r.response)};else if(a||i==="pje:title:icone:liminar"){Object.defineProperties(r,{response:{value:a||""},responseText:{value:a||""},status:{value:200},statusText:{value:"OK"},readyState:{value:4}}),r.dispatchEvent(new Event("readystatechange")),r.dispatchEvent(new Event("load")),r.dispatchEvent(new Event("loadend"));return}}else{i.getCache(n,...s).then(u=>{if(u)Object.defineProperties(r,{response:{value:u||""},responseText:{value:u?()=>{try{return typeof u=="object"?JSON.stringify(u):u.toString()}catch{return u.toString()}}:""},status:{value:200},statusText:{value:"OK"},readyState:{value:4}}),r.dispatchEvent(new Event("readystatechange")),r.dispatchEvent(new Event("load")),r.dispatchEvent(new Event("loadend"));else return Reflect.apply(e,r,s)});return}return Reflect.apply(e,r,s)}})}static getInstance(){return F.selfInstance}subscreverMapeadorAPIExterno(e){if(this.mapAPI.some(r=>r instanceof J&&r.urlPattern===e.urlPattern)){C.aviso("Tentativa de outra subscri\u00e7\u00e3o para o mesmo MapeadorAPIExterno."),C.console.log("MapeadorAPIExterno: ",e);return}this.mapAPI.push(e)}desinscreverMapeadorAPIExterno(e){const r=this.mapAPI.findIndex(s=>s instanceof J&&s.urlPattern===e.urlPattern);r!==-1?this.mapAPI.splice(r,1):(C.aviso("MapeadorAPIExterno n\u00e3o desincrito."),C.console.log("MapeadorAPIExterno: ",e))}};c(F,"selfInstance");let Z=F;class Ae{constructor(){c(this,"cacheMap",new Map)}get(t){return this.cacheMap.get(t)}set(t,e){this.cacheMap.set(t,e)}has(t){return this.cacheMap.has(t)}}const C=new A({recurso:E.name,contexto:"contexto de p\u00e1gina"}),He="Auxiliador do Cache do XmlHTTpRequest proxy",ke={auxiliador:Z,checarHref:$.HREFS.PAINEL_USUARIO,emIframe:!0},Be=new S(He,ke);var U=(o=>(o.OBTER_TODAS="obterTodas",o.CRIAR="criar",o.EDITAR="editar",o.EXCLUIR="excluir",o.LISTAR="listar",o.INCLUIR="incluir",o))(U||{}),G=function(o,t){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},G(o,t)};function ye(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");G(o,t);function e(){this.constructor=o}o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function te(o){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(o,t){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var r=e.call(o),s,n=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(i)throw i.error}}return n}function Q(o,t,e){if(e||arguments.length===2)for(var r=0,s=t.length,n;r<s;r++)(n||!(r in t))&&(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return o.concat(n||Array.prototype.slice.call(t))}function M(o){return typeof o=="function"}function xe(o){var t=function(r){Error.call(r),r.stack=new Error().stack},e=o(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var W=xe(function(o){return function(e){o(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,s){return s+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function re(o,t){if(o){var e=o.indexOf(t);0<=e&&o.splice(e,1)}}var Y=function(){function o(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return o.prototype.unsubscribe=function(){var t,e,r,s,n;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=te(i),u=a.next();!u.done;u=a.next()){var l=u.value;l.remove(this)}}catch(y){t={error:y}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}else i.remove(this);var p=this.initialTeardown;if(M(p))try{p()}catch(y){n=y instanceof W?y.errors:[y]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var d=te(g),h=d.next();!h.done;h=d.next()){var v=h.value;try{oe(v)}catch(y){n=n??[],y instanceof W?n=Q(Q([],K(n)),K(y.errors)):n.push(y)}}}catch(y){r={error:y}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(r)throw r.error}}}if(n)throw new W(n)}},o.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)oe(t);else{if(t instanceof o){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},o.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},o.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},o.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&re(e,t)},o.prototype.remove=function(t){var e=this._finalizers;e&&re(e,t),t instanceof o&&t._removeParent(this)},o.EMPTY=function(){var t=new o;return t.closed=!0,t}(),o}();Y.EMPTY;function Je(o){return o instanceof Y||o&&"closed"in o&&M(o.remove)&&M(o.add)&&M(o.unsubscribe)}function oe(o){M(o)?o():o.unsubscribe()}var We={setTimeout:function(o,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return setTimeout.apply(void 0,Q([o,t],K(e)))},clearTimeout:function(o){return clearTimeout(o)},delegate:void 0};function Ze(o){We.setTimeout(function(){throw o})}function se(){}var Ge=function(o){ye(t,o);function t(e){var r=o.call(this)||this;return r.isStopped=!1,e?(r.destination=e,Je(e)&&e.add(r)):r.destination=Xe,r}return t.create=function(e,r,s){return new be(e,r,s)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Y),Ke=function(){function o(t){this.partialObserver=t}return o.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(r){H(r)}},o.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(r){H(r)}else H(t)},o.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){H(e)}},o}(),be=function(o){ye(t,o);function t(e,r,s){var n=o.call(this)||this,i;return M(e)||!e?i={next:e??void 0,error:r??void 0,complete:s??void 0}:i=e,n.destination=new Ke(i),n}return t}(Ge);function H(o){Ze(o)}function Qe(o){throw o}var Xe={closed:!0,next:se,error:Qe,complete:se},Ye=xe(function(o){return function(){o(this),this.name="EmptyError",this.message="no elements in sequence"}});function et(o,t){return new Promise(function(e,r){var s=new be({next:function(n){e(n),s.unsubscribe()},error:r,complete:function(){r(new Ye)}});o.subscribe(s)})}const q=class q extends w{constructor(e,r){super(e,r);c(this,"notificationService");q.selfInstance=this}ouvirMensagem(e){if(e.tipo==m.NOTIFICACAO){if(!e.acao){k.aviso(`"${this.nome}": Mensagem inv\u00e1lida`);return}this.notificar(e.acao,typeof e.conteudo=="string"?e.conteudo:e.conteudo.conteudo,typeof e.conteudo=="string"?void 0:e.conteudo.titulo)}}executar(){k.aviso(`"${this.nome}" ativado!!!!`)}static notificarExterno(e,r,s="PJe+R"){q.selfInstance.notificar(e,r,s)}notificar(e,r,s="PJe+R"){var i;this.notificationService=(i=E.obterServicos())==null?void 0:i.notificationMessageService;const n=this.notificationService;if(!n){k.aviso("servi\u00e7o do Ng n\u00e3o est\u00e1 dispon\u00edvel");return}switch(e){case"sucesso":{n==null||n.sendSuccess(s,r);break}case"erro":{n==null||n.sendError(s,r);break}case"alerta":{n==null||n.sendWarn(s,r);break}case"info":{n==null||n.sendInfo(s,r);break}default:k.aviso("a\u00e7\u00e3o desconhecida")}}};c(q,"selfInstance");let j=q;const k=new A({recurso:j.name,contexto:"contexto de p\u00e1gina"});class Oe extends w{constructor(e,r){super(e,r);c(this,"etiquetaService")}async ouvirMensagem(e){var r;if(e.tipo==m.ETIQUETA){if(!e.acao){R.aviso("Mensagem inv\u00e1lida");return}switch(this.etiquetaService=(r=E.obterServicos())==null?void 0:r.etiquetaService,e.acao){case U.INCLUIR:{const{nomeTagCompleto:s,idProcesso:n,notificar:i}=e.conteudo,a=await this.incluir(n,s);i&&(a?j.notificarExterno("sucesso",`Etiqueta "${s}" adicionada com sucesso`):j.notificarExterno("alerta",`N\u00e3o foi poss\u00edvel adicionar a etiqueta: ${s}`));break}case U.OBTER_TODAS:this.obterTodas()}}}async incluir(e,r){var s;try{if(!this.etiquetaService)return R.aviso("servi\u00e7o de etiqueta n\u00e3o est\u00e1 dispon\u00edvel"),null;const n=(s=this.etiquetaService)==null?void 0:s.incluirProcessoTag({tag:r,idProcesso:e});if(!n)return R.aviso("EtiquetaService n\u00e3o est\u00e1 definido ou n\u00e3o retorna um Observable"),null;const i=await et(n);return i?(this.emitirMensagemInterna({origem:"PJEMaisR",tipo:m.TAREFA,mensagem:{acao:"incluir-tagsProcessoList",conteudo:{tag:i,idProcesso:e},tipo:m.TAREFA}}),i):(R.info("enteidade etiqueta n\u00e3o existe"),null)}catch{return R.erro("Erro ao incluir a tag no processo"),null}}obterTodas(){var r,s,n;const e=(r=E.obterRefArray())==null?void 0:r.listaEtiquetas;e&&e.length?(s=this.mensageria)==null||s.enviarMensagemExtensao({tipo:m.ETIQUETA,acao:U.OBTER_TODAS,conteudo:e}):((n=E.obterServicos())==null?void 0:n.etiquetaService).getTodasTags().subscribe(a=>{var u;a=a,(u=this.mensageria)==null||u.enviarMensagemExtensao({tipo:m.ETIQUETA,acao:U.OBTER_TODAS,resposta:!0,conteudo:a})})}executar(){R.aviso(`"${this.nome}" injetado!!!`)}}const R=new A({recurso:Oe.name,contexto:"contexto de p\u00e1gina"}),tt="Auxiliador do Servi\u00e7o de Etiquetas",rt={auxiliador:Oe,checarHref:$.HREFS.PAINEL_USUARIO,ouvirMensageria:!0,emIframe:!0},ot=new S(tt,rt),st="Auxiliador de Extra\u00e7\u00e3o de Pacotes do Frontend",nt={auxiliador:E,checarHref:$.HREFS.PAINEL_USUARIO,ouvirMensageria:!0,prioridade:1,emIframe:!0},it=new S(st,nt);class Ie extends w{constructor(t,e){super(t,e)}executar(){var h;ne.aviso(`"${this.nome}" ativado!!!!`);const t=E.obterServicos().utilService,{currentUser:e,pjeLegacyUrl:r}=sessionStorage,{TIPO_JUSTICA:s,WEB_ROOT:n,PDPJ_MARKETPLACE:i,VERSAO_LEGACY:a,INSTANCIA:u,ID_USUARIO_LOCALIZACAO:l}=t.config.pjePayload.CONSTANTES,p=JSON.parse(e),g=JSON.parse(r),d={tipo:m.INFO_GERAL,acao:"infoInit",conteudo:{currentUser:p,pjeLegacyUrl:g,constantes:{TIPO_JUSTICA:s,WEB_ROOT:n,PDPJ_MARKETPLACE:i,VERSAO_LEGACY:a,INSTANCIA:u,ID_USUARIO_LOCALIZACAO:l}}};(h=this.mensageria)==null||h.enviarMensagemExtensao(d),ne.inspecionar("Mensagem enviada para a extens\u00e3o!!!!",d)}obtentorAssincromo(){var t,e,r,s,n,i;return!!((t=window.sessionStorage)!=null&&t.currentUser)&&!!((e=window.sessionStorage)!=null&&e.pjeLegacyUrl)&&!!((i=(n=(s=(r=E.obterServicos())==null?void 0:r.utilService)==null?void 0:s.config)==null?void 0:n.pjePayload)!=null&&i.CONSTANTES)}}const ne=new A({recurso:Ie.name,contexto:"contexto de p\u00e1gina"}),at="Auxiliador do Obtentor do Payload do NgFrame",ct={auxiliador:Ie,checarHref:$.HREFS.PAINEL_USUARIO,obterAssincromamente:!0,emIframe:!0,usarMensageria:!0},ut=new S(at,ct),lt="Auxiliador do Servi\u00e7o de Notifica\u00e7\u00e3o do Ng",dt={auxiliador:j,checarHref:$.HREFS.PAINEL_USUARIO,ouvirMensageria:!0,emIframe:!0},pt=new S(lt,dt);var B=(o=>(o.INCLUIR_TAG_PROCESSO_LIST="incluir-tagsProcessoList",o.OBTER_ATUAIS="obterAtuais",o))(B||{});class Pe extends w{constructor(e,r){super(e,r);c(this,"zone");c(this,"tarefasComponente")}ouvirMensagem(e){var r,s;if(e.tipo==m.TAREFA){if(!e.acao){ie.aviso("Mensagem inv\u00e1lida");return}switch(this.zone=(r=E.obterRefArray())==null?void 0:r.zone,this.tarefasComponente=(s=E.obterRefArray())==null?void 0:s._tarefasComponent,e.acao){case B.INCLUIR_TAG_PROCESSO_LIST:{const{tag:n,idProcesso:i}=e.conteudo;this.incluirTagProcessoList(i,n);break}case B.OBTER_ATUAIS:{this.obterAtuais(e);break}}}}incluirTagProcessoList(e,r){var s;(s=this.zone)==null||s.run(()=>{var n;(n=this.tarefasComponente)==null||n.processosTarefa.processos.forEach(i=>{(i.idProcesso===e||e===""+i.idProcesso)&&!i.tagsProcessoList.includes(r)&&i.tagsProcessoList.push(r)})})}obterAtuais(e){var s,n,i;const r=(n=(s=this.tarefasComponente)==null?void 0:s.processosTarefa)==null?void 0:n.processos;r&&r.length&&((i=this.mensageria)==null||i.enviarMensagemExtensao({tipo:m.ETIQUETA,acao:B.OBTER_ATUAIS,conteudo:{id:e.id,tarefas:r}}))}executar(){ie.aviso(`"${this.nome}" ativado!!!`)}}const ie=new A({recurso:Pe.name,contexto:"contexto de p\u00e1gina"}),ft="Auxiliador do Servi\u00e7o de Tarefa",ht={auxiliador:Pe,checarHref:$.HREFS.PAINEL_USUARIO,ouvirMensageria:!0,emIframe:!0},vt=new S(ft,ht),mt=[it,ut,ot,vt,Be,pt];new Ee(mt).iniciar();
})()