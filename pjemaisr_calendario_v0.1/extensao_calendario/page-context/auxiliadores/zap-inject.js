const e=window,E=()=>!!document.querySelector("#pane-side"),k=()=>typeof e.webpackJsonp=="function"||Array.isArray(e.webpackChunkwhatsapp_web_client)||typeof e.require=="function",N=t=>new Promise(r=>setTimeout(r,t)),$=t=>console.log(`%c${t}`,"color: lightGreen; font-weight: bold; font-size: 14px;"),T=t=>console.log(`%c${t}`,"color: red; font-weight: bold;"),O=t=>console.log(`%c${t}`,"color: orange; font-weight: bold;"),x=(t=!0)=>t?J():B(),J=()=>new Promise((t,r)=>{var a,o,n,s,d,f,p,m,A,P,_,R,W,v,j;try{const y=()=>{const c=Math.random().toString(36).substring(7),i={},u=e.webpackChunkbuild||e.webpackChunkwhatsapp_web_client;if(!Array.isArray(u))throw new Error("webpackChunk n\u00e3o encontrato ou n\u00e3o \u00e9 um array");return u.push([[c],{},l=>{Object.keys(l.m).forEach(h=>{i[h]=l(h)})}]),{modules:i,findModule(l){const h=[];return Object.keys(i).forEach(S=>{const M=i[S];if(M!==void 0)if(typeof l=="string"){if(typeof M.default=="object")for(const g in M.default)g===l&&h.push(M);for(const g in M)g===l&&h.push(M)}else if(typeof l=="function")l(M)&&h.push(M);else throw new TypeError(`findModule aceita string ou fun\u00e7\u00e3o; recebido ${typeof l}`)}),h},get(l){return i[l]}}};if(e.require&&e.importDefault){const c=u=>e.require(u),i=u=>e.importDefault(u);e.Store={Chat:(a=c("WAWebChatCollection"))==null?void 0:a.ChatCollection,Contact:(o=c("WAWebContactCollection"))==null?void 0:o.ContactCollection,Msg:(n=c("WAWebMsgCollection"))==null?void 0:n.MsgCollection,MsgKey:i("WAWebMsgKey"),BusinessProfile:(s=c("WAWebBusinessProfileCollection"))==null?void 0:s.BusinessProfileCollection,GroupMetadata:i("WAWebGroupMetadataCollection"),TextMsgChatAction:c("WAWebSendTextMsgChatAction"),MediaCollection:i("WAWebAttachMediaCollection"),UserConstructor:i("WAWebWid"),EnumTypes:c("WAWebWamEnumMediaPickerOriginType")},e.Store.InitType="old_method_1"}else{const c=y();e.Store={...((d=c.findModule(i=>{var u;return(u=i.default)==null?void 0:u.Chat})[0])==null?void 0:d.default)??{}},e.Store.MediaCollection=(f=c.findModule(i=>{var u,l;return(l=(u=i.default)==null?void 0:u.prototype)==null?void 0:l.processAttachments})[0])==null?void 0:f.default,e.Store.UserConstructor=(p=c.findModule(i=>{var u,l,h,S;return((l=(u=i.default)==null?void 0:u.prototype)==null?void 0:l.isServer)&&((S=(h=i.default)==null?void 0:h.prototype)==null?void 0:S.isUser)})[0])==null?void 0:p.default,e.Store.TextMsgChatAction=c.findModule("sendTextMsgToChat")[0],e.Store.WidFactory=c.findModule("createWid")[0],e.Store.Cmd=(m=c.findModule("Cmd")[0])==null?void 0:m.Cmd,e.Store.ChatState=c.findModule("sendChatStateComposing")[0],e.Store.ContactMethods=c.findModule("getUserid")[0],e.Store.ChatHelper=c.findModule("findChat")[0],e.Store.EnumTypes=c.findModule("MEDIA_PICKER_ORIGIN_TYPE")[0],e.Store.MenuClasses=(A=c.findModule(i=>{var u,l;return((u=i==null?void 0:i.default)==null?void 0:u.menu)&&((l=i==null?void 0:i.default)==null?void 0:l.item)})[0])==null?void 0:A.default,e.Store.InitType="old_method_2"}(R=(_=(P=e.Store)==null?void 0:P.Chat)==null?void 0:_.modelClass)!=null&&R.prototype&&(e.Store.Chat.modelClass.prototype.sendMessage=function(...c){e.Store.TextMsgChatAction.sendTextMsgToChat(this,...c)}),(W=e.Store)!=null&&W.Chat&&!e.Store.Chat._find&&(e.Store.Chat._findAndParse=(v=e.Store.BusinessProfile)==null?void 0:v._findAndParse,e.Store.Chat._find=(j=e.Store.BusinessProfile)==null?void 0:j._find),t()}catch(y){r(`InjectJS :: initStoreOld :: Error :: ${y}`)}}),B=()=>Promise.resolve(),L=()=>{e.PRIMES={lastRead:{}},e.PRIMES._serializeRawObject=t=>{if(!t)return{};const r=t.toJSON?t.toJSON():{...t},a={};for(const o in r){if(["statusMute","disappearingModeDuration","disappearingModeSettingTimestamp","forcedBusinessUpdateFromServer","privacyMode","sectionHeader","verifiedLevel"].includes(o))continue;const n=r[o];o==="id"?a[o]={...n}:typeof n=="object"&&!Array.isArray(n)?a[o]=e.PRIMES._serializeRawObject(n):Array.isArray(n)?a[o]=n.map(s=>typeof s=="object"?e.PRIMES._serializeRawObject(s):s):a[o]=n}return a},e.PRIMES._serializeContactObject=t=>t==null?null:{...e.PRIMES._serializeRawObject(t),formattedName:t.formattedName,displayName:t.displayName,isMe:t.isMe,isMyContact:t.isMyContact,isPSA:t.isPSA,isUser:t.isUser,isVerified:t.isVerified,isWAContact:t.isWAContact},e.PRIMES.base64toFile=(t,r,a)=>{var f;const o=t.split(","),n=a||((f=o[0].match(/:(.*?);/))==null?void 0:f[1])||"application/octet-stream",s=atob(o[1]),d=Uint8Array.from(s,p=>p.charCodeAt(0));return new File([d],r,{type:n})},e.PRIMES.sendAttachment=(t,r,a,o)=>new Promise((n,s)=>{try{const d=e.Store.Chat.get(r),f=new e.Store.MediaCollection(d);f.processAttachments([{file:t},1],d,d).then(()=>{try{const p=f._models[0],m={quotedMsg:!1,isCaptionByUser:!0,type:p.type};/\S/.test(a)&&(m.caption=a),p.sendToChat(d,m),n(!0),o==null||o()}catch(p){s(p)}})}catch(d){s(d)}}),e.PRIMES.sendMessage=(t,r)=>new Promise((a,o)=>{try{const n=e.Store.Chat.get(t);n?(n.sendMessage(r),a(!0)):o("chat or group not found")}catch(n){o(n)}})};let I,C=0;const w=(t=!0)=>{clearInterval(I),C=0,I=window.setInterval(()=>{if(E()&&k())x(t).then(()=>{if(L(),e.Store&&e.PRIMES)$(`InjectJS :: initMain - Success :: useOldMethod = ${t}`),clearInterval(I);else{C++;const r=e.PRIMES?"Store":"PRIMES";T(`InjectJS :: initMain - Error :: ${r} not initialized :: useOldMethod = ${t}`)}}).catch(r=>{C++,T(`InjectJS :: initMain - Error :: ${r}`)});else{const r=E()?"Webpack":"Whatsapp";O(`InjectJS :: initMain - Warn :: ${r} not loaded yet.`)}!t&&C===5&&(O("InjectJS :: initMain - Reload :: useOldMethod = true"),w(!0))},1e3)};w(!0);e.addEventListener("PRIMES::init",t=>{const r=t.detail.useOldMethod;w(r)});e.addEventListener("PRIMES::send-attachments",async t=>{const{attachments:r,caption:a,number:o}=t.detail;let n=o;o==="current"&&e.Store.Chat.getActive?n=e.Store.Chat.getActive().id._serialized:o.endsWith("@c.us")||(n=`${o}@c.us`);try{for(let s=0;s<r.length;s++){const d=e.PRIMES.base64toFile(r[s].data,r[s].name,r[s].type);await e.PRIMES.sendAttachment(d,n,a[s]),console.log("\u2705 Anexo enviado:",r[s].name)}}catch(s){console.error("\u274c Erro ao enviar anexo:",s)}});e.addEventListener("PRIMES::send-message",async t=>{const{number:r,message:a}=t.detail,o=`${r}@c.us`;try{await e.PRIMES.sendMessage(o,a),window.postMessage({type:"send_message",payload:{chat_id:o,is_message_sent:"YES",comments:""}},"*")}catch(n){window.postMessage({type:"send_message_error",payload:{chat_id:o,error:n,is_message_sent:"NO",comments:"Error while sending the message to number"}},"*")}});async function U(t,r=15,a=1e3){for(let o=0;o<r;o++){const n=e.Store.Chat.get(t);if(n)return n;await N(a)}throw new Error("Chat n\u00e3o carregado")}e.addEventListener("message",async t=>{var s;if(((s=t.data)==null?void 0:s.type)!=="PJEMAISR_INTIMA_ZAP_ENVIAR")return;const{numero:r,mensagem:a,arquivos:o}=t.data,n=`${r}@c.us`;try{await U(n)}catch{console.error("\u274c Chat n\u00e3o carregado:",n);return}if(a!=null&&a.trim())try{await e.PRIMES.sendMessage(n,a),console.log("\u2705 Mensagem enviada para",n)}catch(d){console.error("\u274c Erro ao enviar mensagem:",d)}if(Array.isArray(o)&&o.length)for(const d of o)try{const f=e.PRIMES.base64toFile(d.data,d.name,d.type);await e.PRIMES.sendAttachment(f,n,""),console.log("\u2705 Anexo enviado:",d.name)}catch(f){console.error("\u274c Erro ao enviar anexo:",d.name,f)}});let b;const q=()=>{clearInterval(b),b=window.setInterval(()=>{E()&&e.Store&&e.PRIMES&&clearInterval(b)},1e3)};q();
